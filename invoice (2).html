<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>my first pdfmake example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/pdfmake.min.js"
    integrity="sha512-gYUM+7JjtBqPPGOgwgOZ+NwjGl+11/EP124oB+ihjlBpLgP5LTh7R/Iwcdy//cgH+QzrjspBiJI5iUegTNww3w=="
    crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.68/vfs_fonts.min.js"
    integrity="sha512-VIF8OqBWob/wmCvrcQs27IrQWwgr3g+iA4QQ4hH/YeuYBIoAUluiwr/NX5WQAQgUaVx39hs6l05cEOIGEB+dmA=="
    crossorigin="anonymous"></script>

</head>

<body>
  <script>


    // var text = '{"appointment":{"customer":{"name":"Dileep","email":"dileep123@gmail.com","balance":500},"time":"Oct 8, 10.00 am","appointmentDetails":{"paymentMode":"Google Pay","aptFee":2000,"fee":1500}}}';

   var text = "{\"appointment1\":{\"customer\":{\"name\":\"Dileep\",\"email\":\"dileep123@gmail.com\",\"balance\":500},\"time\":\"Oct 8, 10.00 am\",\"appointmentDetails\":{\"paymentMode\":\"Google Pay\",\"aptFee\":2000,\"fee\":1500}},\"appointment2\":{\"customer\":{\"name\":\"Dileep\",\"email\":\"dileep123@gmail.com\",\"balance\":600},\"time\":\"Oct 10, 10.00 am\",\"appointmentDetails\":{\"paymentMode\":\"Cash\",\"aptFee\":3000,\"fee\":2500}}}";

    obj = JSON.parse(text);

     var i;
    for (var key in obj) {
      
      console.log(obj[key].customer.name);
      
      ////// pdfmake
    var win = window.open("", "_blank");
    var invoice = {
      info: {
        // title: 'INVOICE BY AEGLEPRO',
        // author: 'john doe',
        subject: 'Invoice',
        keywords: 'invoice',
      },
      // watermark: { text: 'test watermark', color: 'blue', opacity: 0.08, bold: true, italics: false },

      content: [
        {
          text: "I N V O I C E", style: 'header', alignment: 'center', margin: [1, 50, 1, 25]
        },
        {
          text: (obj[key].customer.name), style: 'subheader', lineHeight: 2
        },
        {
          columns: [
            {
              width: '50%',
              // text: 'Date Issued: 10 Nov 2020\nInvoice ID: 112114789508'
              text: [
                { text: 'Date Issued: ' },
                { text: (obj.appointment1.time), bold: true, style: 'subheader2' },
                { text: '\nInvoice ID: ', lineHeight: 1.5 },
                { text: '\t112114789508', bold: true, style: 'subheader2' }
              ]
            },
            {
              width: '50%',
              alignment: 'right', lineHeight: 1.5,
              text: 'Apollo Hospitals\n21 Greams Lane, Off, Greams Road\nThousand Lights, Chennai,\n 600006'
            }
          ],
          // optional space between columns
          columnGap: 10
        },
        "\n\n\n",
        {
          style: 'tableExample',
          // lineHeight: 2,
          margin: [1, 30, 1, 5],
          layout: 'headerLineOnly',
          table: {
            headerRows: 1,
            widths: ["35%", "35%", "30%"],
            body: [
              [{ alignment: 'left', text: 'DESCRIPTION', style: 'tableHeader', margin: [1, 1, 1, 10] },
              { alignment: 'center', text: 'DATE & TIME', style: 'tableHeader', margin: [1, 1, 1, 10] },
              { alignment: 'center', text: 'SUBTOTAL', style: 'tableHeader', margin: [1, 1, 1, 10] }],
              [
                { text: 'Appointment', margin: [1, 15, 1, 1], style: 'subheader2' },
                { text: (obj.appointment1.time), italics: true, alignment: 'center', margin: [1, 15, 1, 1], style: 'subheader2' },
                { text: '₹ 500', italics: true, alignment: 'center', margin: [1, 15, 1, 1], style: 'subheader' },
              ],
              // [
              // {text: 'Appointment', margin: [1,15,1,1],style: 'subheader2'},
              //     {text: '10 Nov 2020', italics: true, alignment: 'center', margin: [1,15,1,1],style: 'subheader2'},
              //     {text: '03:30 PM', italics: true, alignment: 'center', margin: [1,15,1,1],style: 'subheader2'},
              //     {text: '₹ 300', italics: true, alignment: 'center', margin: [1,15,1,1],style: 'subheader'}
              // ]
            ]
          }
        },
        "\n\n\n",
        {
          style: 'tableExample',
          layout: 'lightHorizontalLines',
          table: {
            widths: ["50%", "50%"],
            body: [
              [{ alignment: 'right', text: 'OUTSTANDING BALANCE', style: 'subheader2', margin: [5, 1, 1, 5] },
              { alignment: 'right', text: "₹ " + (obj.appointment2.customer.balance), italics: true, style: 'subheader', margin: [5, 1, 50, 5] },],
              [
                { text: '\n\n\n', italics: true, color: 'gray', alignment: 'right' }, { text: '', italics: true, color: 'gray', alignment: 'right' }
              ]
            ]
          }
        },
        //////
        // {
        //     style: 'tableExample',
        //     table: {
        //         widths: ["30%", "40%", "30%"],
        //         headerRows: 1,
        //         body: [
        //             [{alignment: 'center', text: 'MODE OF PAYMENT', style: 'tableHeader'}, {alignment: 'center', text: 'PAYMENT DATE', style: 'tableHeader'}, {alignment: 'center', text: 'TOTAL', style: 'tableHeader'}],
        //             // ['Sample value 1', 'Sample value 2', 'Sample value 3']
        //             [
        //                 {text: (obj.appointment.appointmentDetails.paymentMode), italics: true, color: 'black',alignment: 'center'},
        //                 {text: (obj.appointment.time), italics: true, color: 'black',alignment: 'center'},
        //                 {text: '₹ 700.00', italics: true, color: 'black',alignment: 'center'},
        //             ]
        //         ]
        //     },
        //     layout: {

        //         hLineColor: function (i, node) {
        //             return (i === 0 || i === node.table.body.length) ? 'black' : 'gray';
        //         },
        //         vLineColor: function (i, node) {
        //             return (i === 0 || i === node.table.widths.length) ? 'black' : 'gray';
        //         },
        //         // hLineStyle: function (i, node) { return {dash: { length: 10, space: 4 }}; },
        //         // vLineStyle: function (i, node) { return {dash: { length: 10, space: 4 }}; },
        //         // paddingLeft: function(i, node) { return 4; },
        //         // paddingRight: function(i, node) { return 4; },
        //         // paddingTop: function(i, node) { return 2; },
        //         // paddingBottom: function(i, node) { return 2; },
        //         // fillColor: function (rowIndex, node, columnIndex) { return null; }
        //     }
        // },

        {
          style: 'tableExample',
          table: {
            widths: ["30%", "40%", "30%"],
            headerRows: 1,
            body: [
              [{ text: 'MODE OF PAYMENT', style: 'tableHeader', margin: [1, 1, 1, 10] }, { text: 'PAYMENT DATE', style: 'tableHeader', margin: [1, 1, 1, 10] }, { text: 'TOTAL', style: 'tableHeader', alignment: 'center', margin: [1, 1, 1, 10] }],
              [
                { text: (obj.appointment2.appointmentDetails.paymentMode), italics: true, color: 'black', alignment: 'left', margin: [1, 15, 1, 1] },
                { text: (obj.appointment2.time), italics: true, color: 'black', alignment: 'left', margin: [1, 15, 1, 1] },
                { text: '₹ 700', style: 'header', italics: true, color: 'black', alignment: 'center', margin: [1, 15, 1, 15] },
              ],
              ['', '', ''],
            ]
          },
          layout: 'lightHorizontalLines'
        },
        //////////////
        "\n\n\n",

        {
          text: [
            { text: 'Note: ', fontSize: 15, bold: true, alignment: 'center' },
            { text: 'This is a computer generated invoice therefore it do not need any signature.\n\n\n', italics: true },]
        },
        // {text: 'Thank you!', bold: true, italics: true, color: 'black',alignment: 'left' ,  fontSize: 18},
        // {text: 'Thank you!', italics: true, color: 'black', alignment: 'right' }

        {
          alignment: 'justify',
          columns: [
            {
              width: "5%",
              svg: '<svg enable-background="new 0 0 24 24" height="512" viewBox="0 0 24 24" width="512" xmlns="http://www.w3.org/2000/svg"><path d="m22.128 3.901c-1.21-1.226-2.819-1.901-4.532-1.901s-3.321.675-4.531 1.9l-1.065 1.08-1.065-1.079c-1.21-1.226-2.819-1.901-4.531-1.901-1.713 0-3.322.675-4.532 1.901-2.491 2.524-2.491 6.631 0 9.153l9.594 9.722c.141.144.333.224.534.224s.393-.08.534-.224l9.594-9.721c2.491-2.523 2.491-6.629 0-9.154z" fill="#f44336"/><path d="m11.466 22.776c.141.144.333.224.534.224s.393-.08.534-.224l9.594-9.721c2.491-2.523 2.491-6.63 0-9.154-1.21-1.226-2.819-1.901-4.532-1.901s-3.321.675-4.531 1.9l-1.065 1.08-1.065-1.079c-1.21-1.226-2.819-1.901-4.531-1.901-1.713 0-3.322.675-4.532 1.901-2.491 2.524-2.491 6.631 0 9.153zm-8.527-17.822c.926-.937 2.157-1.454 3.464-1.454 1.308 0 2.538.517 3.463 1.455l1.599 1.62c.281.285.786.285 1.067 0l1.599-1.621c.928-.937 2.158-1.454 3.465-1.454 1.308 0 2.538.517 3.464 1.454 1.917 1.943 1.917 5.104 0 7.048l-9.06 9.181-9.061-9.182c-1.917-1.942-1.917-5.104 0-7.047z"/></svg>',
              fit: [20, 20]
            },
            {
              width: "35%",
              text: 'Thank you!', bold: true, italics: false, color: 'black', alignment: 'left', fontSize: 18
            },
            {
              width: "60%",
              text: 'name@email.com | 0777 888 999 | example.com ', italics: false, color: 'black', alignment: 'right'
            }
          ]
        },

      ],

      // footer: {
      //     text: [
      //       {
      //         text: [
      //           {text: '** Generated through AEGLEPRO **', alignment: 'center' },
      //           // {text: 'This is a computer generated invoice therefore it do not need any signature.', italics: true},

      //         ]
      //       },

      //     ]

      //   },

      styles: {
        header: {
          fontSize: 20,
          bold: true,
          margin: [0, 0, 0, 10]
        },
        subheader: {
          fontSize: 18,
          bold: true,
          margin: [0, 10, 0, 5]
        },
        subheader2: {
          fontSize: 14,
          bold: true,
          margin: [0, 10, 0, 5]
        },
        tableExample: {
          margin: [0, 5, 0, 15]
        },
        tableHeader: {
          // bold: true,
          // fontSize: 10,
          color: 'black'
        }
      },
      defaultStyle: {
        // alignment: 'justify'
        // font: 'Robo'
      }
    };

    // pdfMake.createPdf(invoice).download("invoice.pdf");
    pdfMake.createPdf(invoice).open({}, win);
  ////// ./pdfmake

    }
  </script>
</body>

</html>